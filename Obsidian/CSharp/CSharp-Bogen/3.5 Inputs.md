Grundlæggende Input

For at læse input fra brugeren i en C#-konsolapplikation bruger man metoden `Console.ReadLine()`. Denne metode læser en linje tekst, som brugeren indtaster, og returnerer den som en streng.

Her er et simpelt eksempel på, hvordan du kan bruge `Console.ReadLine()` til at få input fra brugeren:

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("Indtast dit navn:");
        string name = Console.ReadLine();

        Console.WriteLine("Hej, " + name + "!");
    }
}
```

I dette eksempel bliver brugeren bedt om at indtaste sit navn. `Console.ReadLine()` fanger input og gemmer det i variablen `name`, hvorefter programmet udskriver en hilsen.

**Konvertering af Input**

Da `Console.ReadLine()` altid returnerer en streng, skal du konvertere input til andre datatyper, hvis du arbejder med tal eller andre typer data.

**Eksempel med heltal**

For at konvertere en brugers input til et heltal kan du bruge `int.Parse()` eller `Convert.ToInt32()`. Her er et eksempel:

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("Indtast din alder:");
        string ageInput = Console.ReadLine();
        int age = int.Parse(ageInput);

        Console.WriteLine("Du er " + age + " år gammel.");
    }
}
```

I dette eksempel læser `Console.ReadLine()` brugerens alder som en streng. `int.Parse(ageInput)` konverterer derefter strengen til et heltal.

**Fejlhåndtering**

Når du konverterer brugerinput, er det vigtigt at håndtere mulige fejl, hvis brugeren indtaster ugyldige data. Dette kan gøres ved hjælp af `TryParse()` metoderne, som ikke kaster en undtagelse, hvis konverteringen fejler.

**Eksempel med fejlhåndtering**

Her er et eksempel, der bruger `int.TryParse()` til at håndtere ugyldige heltalsinput:

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("Indtast din alder:");
        string ageInput = Console.ReadLine();
        int age;

        if (int.TryParse(ageInput, out age))
        {
           Console.WriteLine("Du er " + age + " år gammel.");
        }
        else
        {
           Console.WriteLine("Ugyldigt input! Sørg for at indtaste et heltal.");
        }
    }
}
```

I dette eksempel forsøger `int.TryParse()` at konvertere `ageInput` til et heltal. Hvis det lykkes, gemmes resultatet i variablen `age`, og programmet udskriver alderen. Hvis konverteringen fejler, udskriver programmet en fejlmeddelelse.

**Input med forskellige datatyper**

Lad os se på, hvordan vi kan håndtere forskellige datatyper fra brugerinput, som f.eks. dobbelte, datoer og booleans.

**Eksempel med dobbelte**

For at læse et dobbelt (decimaltal) fra brugerinput, bruger du `double.TryParse()`:

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("Indtast din højde i meter:");
        string heightInput = Console.ReadLine();
        double height;

        if (double.TryParse(heightInput, out height))
        {
           Console.WriteLine("Din højde er " + height + " meter.");
        }
        else
        {
			       Console.WriteLine(@"Ugyldigt input! 
			       Sørg for at indtaste et decimaltal.");
        }
    }
}
```

**Eksempel med dato**

For at læse en dato fra brugerinput, bruger du `DateTime.TryParse()`:

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("Indtast din fødselsdato (dd-mm-yyyy):");
        string dateInput = Console.ReadLine();
        DateTime birthDate;

        if (DateTime.TryParse(dateInput, out birthDate))
        {
            Console.WriteLine(@"Din fødselsdato er "
             + birthDate.ToShortDateString() + ".");
        }
        else
        {
            Console.WriteLine(@"Ugyldigt input!
            Sørg for at indtaste en gyldig dato.");
        }
    }
}
```

**Eksempel med boolean**

For at læse en boolean værdi fra brugerinput, bruger du `bool.TryParse()`:

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("Er du studerende? (true/false):");
        string isStudentInput = Console.ReadLine();
        bool isStudent;

        if (bool.TryParse(isStudentInput, out isStudent))
        {
            if (isStudent)
            {
                Console.WriteLine("Du er studerende.");
            }
            else
            {
                Console.WriteLine("Du er ikke studerende.");
            }
        }
        else
        {
            Console.WriteLine(@"Ugyldigt input! 
            Sørg for at indtaste 'true' eller 'false'.");
        }
    }
}

```

**Opsummering**

I en C#-konsolapplikation kan du nemt håndtere brugerinput ved hjælp af `Console.ReadLine()` og konverteringsmetoder som `int.Parse()`, `double.TryParse()`, `DateTime.TryParse()`, og `bool.TryParse()`. Det er vigtigt at håndtere fejlagtige input for at undgå, at programmet går ned, og give brugeren passende feedback. Dette gør dine applikationer mere robuste og brugervenlige.

### Scope - Lokalt og globalt

I C# kan variabler og funktioner eksistere i forskellige scopes, hvilket betyder, at de kun er synlige og tilgængelige inden for visse områder af din kode.

**Lokalt Scope:** Variabler og funktioner, der er deklareret inden for en metode eller en blok af kode, har et lokalt scope. De er kun synlige og tilgængelige inden for den pågældende metode eller blok af kode. Når metoden eller blokken af kode er afsluttet, bliver variablerne og funktionerne ikke længere tilgængelige. Dette betyder, at de ikke kan tilgås fra andre metoder eller blokke af kode uden for deres lokale scope.

Eksempel på variabel med lokalt scope:

```csharp
void MyMethod()
{
    int x = 10; // Lokal variabel inden for MyMethod
    Console.WriteLine(x);
    // Andre kodelinjer
}
```

**Globalt Scope:** Variabler og funktioner, der er deklareret uden for en metode eller blok af kode, har et globalt scope. De er synlige og tilgængelige fra enhver del af programmet, herunder andre metoder og blokke af kode. Variabler og funktioner med globalt scope kaldes også globale variabler og globale funktioner. De kan tilgås og ændres fra flere forskellige steder i koden.

Eksempel på variabel med globalt scope:

```csharp
int x = 10; // Global variabel uden for enhver metode

void MyMethod()
{
    Console.WriteLine(x); // Kan tilgås fra MyMethod
    // Andre kodelinjer
}
```

Det er vigtigt at være opmærksom på, at brugen af globale variabler og funktioner skal gøres med forsigtighed. Da de er tilgængelige fra enhver del af programmet, kan de være sværere at spore og debugge. Derudover kan ændringer i globale variabler have utilsigtede konsekvenser, hvis de utilsigtet påvirker andre dele af koden. Derfor anbefales det normalt at begrænse brugen af globale variabler og i stedet bruge lokale variabler og funktioner så meget som muligt for at opretholde en mere struktureret og modulær kodebase.

Globale variabler kan være farlige, fordi de er synlige og tilgængelige fra enhver del af programmet. Dette kan føre til uønsket opførsel og vanskeligheder med at spore og debugge fejl. Her er nogle eksempler på, hvordan globale variabler kan være problematiske:

**1. Utilsigtet ændring:** Da globale variabler kan ændres fra flere forskellige steder i koden, kan det være svært at kontrollere, hvilke dele af programmet der ændrer værdien af variablen. Hvis en variabel utilsigtet ændres på et uventet tidspunkt eller på et sted, hvor det ikke var meningen, kan det have uforudsigelige konsekvenser og føre til fejl i programmet.

```csharp
int counter = 0; // Global variabel

void IncrementCounter()
{
    counter++; // Ændrer værdien af den globale variabel counter
}

void ResetCounter()
{
    counter = 0; // Nulstiller den globale variabel counter
}
```

Hvis flere forskellige metoder kalder `IncrementCounter()` eller `ResetCounter()`-funktionen, kan det være svært at vide, hvilken metode der ændrer variablen, og hvornår det sker. Dette kan føre til utilsigtede ændringer og fejl i programmet.

**2. Navnekonflikter:** Hvis du bruger globale variabler med samme navn som lokale variabler i forskellige metoder eller blokke af kode, kan det føre til navnekonflikter og forvirring. Når du bruger et variabelnavn, der allerede er brugt globalt, kan det være svært at vide, hvilken variabel der bliver refereret til, og hvilken værdi der bliver brugt.

```csharp
int x = 10; // Global variabel

void MyMethod()
{
    int x = 20; // Lokal variabel med samme navn
    Console.WriteLine(x); // Hvilken værdi bliver udskrevet? global eller lokal?
}
```

I dette eksempel kan det være uklart, hvilken værdi af variablen `x` der bliver brugt, når den udskrives. Dette kan føre til fejl i logikken og utilsigtede resultater i programmet.

**3. Sværere at teste og vedligeholde:** Når du bruger globale variabler, kan det være sværere at teste og vedligeholde din kode. Da globale variabler kan påvirkes af mange forskellige dele af programmet, kan det være svært at isolere og teste specifik funktionalitet. Dette kan gøre fejlfinding og debugging mere komplekst og tidskrævende.

For at undgå disse problemer anbefales det normalt at begrænse brugen af globale variabler og i stedet bruge lokale variabler, der kun er synlige og tilgængelige inden for deres lokale scope. Dette hjælper med at opretholde en mere struktureret og modulær kodebase, hvor det er nemmere at spore og forstå, hvordan variabler bruges og ændres.