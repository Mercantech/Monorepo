# Videnstjek Docker Makefile
# Dette makefile gÃ¸r det nemt at deploye applikationen med Docker

.PHONY: help build start stop logs status clean prod dev

# Default target
help:
	@echo "ğŸ³ Videnstjek Docker Makefile"
	@echo "=============================="
	@echo ""
	@echo "ğŸ“– Kommandoer:"
	@echo "  make build     # Build Docker image"
	@echo "  make start     # Start containere"
	@echo "  make stop      # Stop containere"
	@echo "  make logs      # Vis container logs"
	@echo "  make status    # Vis container status"
	@echo "  make clean     # Rens Docker"
	@echo "  make prod      # Production deployment"
	@echo "  make dev       # Development deployment"
	@echo ""
	@echo "ğŸ”§ Eksempler:"
	@echo "  make dev       # Development deployment"
	@echo "  make prod      # Production deployment"
	@echo "  make status    # Tjek status"

# Build Docker image
build:
	@echo "ğŸ”¨ Bygger Docker image..."
	docker-compose build

# Start development containere
start:
	@echo "ğŸš€ Starter development containere..."
	docker-compose up -d

# Stop containere
stop:
	@echo "ğŸ›‘ Stopper containere..."
	docker-compose down

# Vis logs
logs:
	@echo "ğŸ“‹ Viser container logs..."
	docker-compose logs -f

# Vis status
status:
	@echo "ğŸ“Š Container status:"
	docker-compose ps
	@echo ""
	@echo "ğŸ” Docker container info:"
	docker ps --filter "name=videnstjek"

# Rens Docker
clean:
	@echo "ğŸ§¹ Renser Docker..."
	docker system prune -f
	@echo "âœ… Docker cleanup fuldfÃ¸rt!"

# Production deployment
prod:
	@echo "ğŸ­ Production deployment..."
	docker-compose -f docker-compose.prod.yml up --build -d
	@echo "âœ… Production applikation startet!"
	@echo "ğŸŒ TilgÃ¦ngelig pÃ¥: http://localhost:8067"

# Development deployment (build + start)
dev: build start
	@echo "âœ… Development applikation startet!"
	@echo "ğŸŒ TilgÃ¦ngelig pÃ¥: http://localhost:8067"

# Full production deployment
prod-full: clean prod
	@echo "âœ¨ Production deployment fuldfÃ¸rt!"

# Full development deployment
dev-full: clean dev
	@echo "âœ¨ Development deployment fuldfÃ¸rt!"
